---
interface Props {
  title: string;
  description: string;
  category: string;
  slug: string;
  testingHours: number;
  rating: number;
  badge?: string;
  image?: string;
}

const { 
  title, 
  description, 
  category, 
  slug, 
  testingHours, 
  rating,
  badge,
  image
} = Astro.props;
---

<a 
  href={`/reviews/${slug}/`}
  class="group bg-white border border-gray-200 rounded-xl overflow-hidden hover:shadow-lg hover:border-[#2563EB] transition-all flex flex-col h-full"
>
  <!-- Image Container -->
  <div class="relative">
    {image ? (
      <div class="aspect-[2/1] bg-gray-50 flex items-center justify-center overflow-hidden">
        <img 
          src={image} 
          alt={title}
          class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
          loading="lazy"
        />
      </div>
    ) : (
      <div class="aspect-[2/1] bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#9CA3AF" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
          <circle cx="8.5" cy="8.5" r="1.5"></circle>
          <polyline points="21 15 16 10 5 21"></polyline>
        </svg>
      </div>
    )}
    
    <!-- Badge - positioned absolutely on the image -->
    {badge && (
      <div class="absolute top-3 left-3 z-10">
        <span class="inline-flex items-center px-3 py-1.5 bg-[#2563EB] text-white text-xs font-bold uppercase tracking-wider rounded-full shadow-md">
          {badge}
        </span>
      </div>
    )}
  </div>
  
  <!-- Content -->
  <div class="p-6 flex flex-col flex-grow">
    <!-- Meta info -->
    <div class="flex items-center gap-2 mb-3">
      <span class="text-xs font-semibold text-[#2563EB] uppercase tracking-wider">
        {category}
      </span>
      <span class="text-gray-300">â€¢</span>
      <span class="text-xs text-gray-500">{testingHours} hrs testing</span>
    </div>
    
    <!-- Title -->
    <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-[#2563EB] transition-colors">
      {title}
    </h3>
    
    <!-- Description -->
    <p class="text-gray-600 text-sm mb-4 line-clamp-2 flex-grow">
      {description}
    </p>
    
    <!-- Footer with rating and CTA -->
    <div class="flex items-center justify-between pt-4 border-t border-gray-100 mt-auto">
      <div class="flex items-center gap-1">
        <span class="font-bold text-gray-900">{rating}</span>
        <div class="flex text-yellow-400">
          {Array.from({ length: 5 }).map((_, i) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill={i < Math.floor(rating) ? "currentColor" : "none"} stroke="currentColor" stroke-width="2">
              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
          ))}
        </div>
      </div>
      <span class="text-[#2563EB] font-medium text-sm flex items-center gap-1">
        Read Review
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </span>
    </div>
  </div>
</a>
